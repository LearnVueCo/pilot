---
title: 'Code Blocks'
subheading: 'Add code blocks to your editor with syntax highlighting'
---

Pilot uses [`tiptap-extension-code-block-shiki`](https://github.com/timomeh/tiptap-extension-code-block-shiki) to provide Shiki syntax highlighting for code blocks.

:editor-content{content='{"type":"doc","content":[{"type":"codeBlock","attrs":{"language":"ts"},"content":[{"type":"text","text":"function exampleFunction() {\n   console.log(\"highlighting\")\n}"}]}]}'}

## Usage

You can add the `CodeBlockExtension` to your editor or use the `EditorExtensions` bundle. If you're using the standalone extension, you must disable the `codeBlock` extension from the `StarterKitExtension` to avoid conflicting plugins.

```ts
import { 
  CodeBlockExtension, 
  StarterKitExtension, 
  usePilot 
} from '@learnvue/pilot'

const { editor } = usePilot({
  extensions: [
    StarterKitExtension.configure({
      codeBlock: false,
    }),
    CodeBlockExtension(),
  ],
})

const { editor } = usePilot({
  extensions: [...EditorExtensions()],
})
```

When using the `EditorExtensions` bundle, it will automatically disable the `codeBlock` extension from the `StarterKitExtension`.
```ts
import { EditorExtensions, usePilot } from '@learnvue/pilot'

const { editor } = usePilot({
  extensions: [...EditorExtensions()],
})
```

When using the editor, you can create a code block by using the Markdown syntax with `\`\`\`ts` or any other supported language.

## Bundle Size

Code highlighting is performed by Shiki, which bundles all its supported languages and themes via lazy dynamic imports.

Most of the time, these files are only imported/downloaded when needed, but when you bundle Shiki, **all** files will be added, increasing your `dist` size. 

::info
Read more about [Shiki's bundle size](https://shiki.style/guide/bundles).

We are looking into ways to allow fine-grained bundling with Shiki, but this is not yet implemented. 
::

## Troubleshooting

If tabs are not being rendered correctly, ensure that the `.tiptap pre` element has it's `whitespace` CSS property set to `pre`.

```css
/* CSS */
.tiptap pre {
  white-space: pre;
}

/* Tailwind CSS */
.tiptap pre {
  @apply whitespace-pre;
}
```

## Configuration

::field-group
  ::field{name="analytics" type="boolean"}
    Default to `false` - Enables analytics for your project (coming soon).
  ::

  ::field{name="blob" type="boolean"}
    Default to `false` - Enables blob storage to store static assets, such as images, videos and more.
  ::

  ::field{name="cache" type="boolean"}
    Default to `false` - Enables cache storage to cache your server route responses or functions using Nitro's `cachedEventHandler` and `cachedFunction`
  ::

  ::field{name="database" type="boolean"}
    Default to `false` - Enables SQL database to store your application's data.
  ::
::